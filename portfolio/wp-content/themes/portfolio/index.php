<?php

/**
 * The main template file
 *
 * This is the most generic template file in a WordPress theme
 * and one of the two required files for a theme (the other being style.css).
 * It is used to display a page when nothing more specific matches a query.
 * E.g., it puts together the home page when no home.php file exists.
 *
 * @link https://developer.wordpress.org/themes/basics/template-hierarchy/
 *
 * @package Portfolio
 */

get_header();
?>

<section class="first-screen">
    <div class="container">
        <div class="first-screen__inner">
            <div class="first-screen__image">
                <svg id="first-screen__img" class="first-screen__img" viewBox="0 0 357 234" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0)">
                        <path data-ignore="true" d="M337.3 225.4H24.1C19.9 225.4 16.5 222 16.5 217.8V7.6C16.5 3.4 19.9 0 24.1 0H337.3C341.5 0 344.9 3.4 344.9 7.6V217.7C345 222 341.5 225.4 337.3 225.4Z" fill="#00D5E4" />
                        <path data-ignore="true" d="M325.6 223.1H34.6C30.4 223.1 27 219.7 27 215.5V20.6C27 16.4 30.4 13 34.6 13H325.6C329.8 13 333.2 16.4 333.2 20.6V215.5C333.3 219.6 329.8 223.1 325.6 223.1Z" fill="#065090" />
                        <line x1="46" y1="32" x2="50" y2="32" stroke="#5E94C1" stroke-width="4" />
                        <line x1="75" y1="31.5" x2="114" y2="31.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46.0001" y1="42" x2="50.0001" y2="42" stroke="#5E94C1" stroke-width="4" />
                        <path d="M75.0001 41.5L102 41.5" stroke="#FCFDFD" stroke-width="5" />
                        <path d="M115 41.5L219 41.5" stroke="#FCFDFD" stroke-width="5" />
                        <path d="M228 41.5L283 41.5" stroke="#FF6452" stroke-width="5" />
                        <line x1="46" y1="52" x2="50" y2="52" stroke="#5E94C1" stroke-width="4" />
                        <path d="M85.0001 51.5L151 51.5" stroke="#00D050" stroke-width="5" />
                        <path d="M170 51.5L268 51.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46" y1="62" x2="50" y2="62" stroke="#5E94C1" stroke-width="4" />
                        <path d="M75.0001 61.5L167 61.5" stroke="#FF6452" stroke-width="5" />
                        <path d="M175 61.5L241 61.5" stroke="#00D5E4" stroke-width="5" />
                        <line x1="46" y1="72" x2="50" y2="72" stroke="#5E94C1" stroke-width="4" />
                        <path d="M85.0001 71.5L151 71.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46" y1="82" x2="50" y2="82" stroke="#5E94C1" stroke-width="4" />
                        <path d="M75.0001 81.5L171 81.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46" y1="92" x2="50" y2="92" stroke="#5E94C1" stroke-width="4" />
                        <path d="M75.0001 91.5L141 91.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46" y1="102" x2="50" y2="102" stroke="#5E94C1" stroke-width="4" />
                        <path d="M95.0001 101.5L204 101.5" stroke="#FF6452" stroke-width="5" />
                        <path d="M215 101.5L251 101.5" stroke="#FCFDFD" stroke-width="5" />
                        <path d="M265 101.5L301 101.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46" y1="112" x2="50" y2="112" stroke="#5E94C1" stroke-width="4" />
                        <path d="M105 111.5L150 111.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46" y1="122" x2="50" y2="122" stroke="#5E94C1" stroke-width="4" />
                        <path d="M105 121.5L165 121.5" stroke="#FF6452" stroke-width="5" />
                        <path d="M185 121.5L251 121.5" stroke="#FCFDFD" stroke-width="5" />
                        <path d="M265 121.5L293 121.5" stroke="#FF6452" stroke-width="5" />
                        <line x1="46" y1="132" x2="50" y2="132" stroke="#5E94C1" stroke-width="4" />
                        <path d="M75.0001 131.5L116 131.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46" y1="142" x2="50" y2="142" stroke="#5E94C1" stroke-width="4" />
                        <path d="M75.0001 141.5L141 141.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46" y1="152" x2="50" y2="152" stroke="#5E94C1" stroke-width="4" />
                        <path d="M105 151.5L224 151.5" stroke="#FCFDFD" stroke-width="5" />
                        <path d="M235 151.5L309 151.5" stroke="#00D5E4" stroke-width="5" />
                        <line x1="46" y1="162" x2="50" y2="162" stroke="#5E94C1" stroke-width="4" />
                        <path d="M105 161.5L146 161.5" stroke="#FCFDFD" stroke-width="5" />
                        <path d="M155 161.5L196 161.5" stroke="#00D050" stroke-width="5" />
                        <path d="M205 161.5L246 161.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46" y1="172" x2="50" y2="172" stroke="#5E94C1" stroke-width="4" />
                        <path d="M75.0001 171.5L141 171.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46" y1="182" x2="50" y2="182" stroke="#5E94C1" stroke-width="4" />
                        <path d="M95 181.5L161 181.5" stroke="#00D050" stroke-width="5" />
                        <path d="M173 181.5L238 181.5" stroke="#00D050" stroke-width="5" />
                        <line x1="46" y1="192" x2="50" y2="192" stroke="#5E94C1" stroke-width="4" />
                        <path d="M95.0001 191.5L192 191.5" stroke="#FCFDFD" stroke-width="5" />
                        <line x1="46" y1="202" x2="50" y2="202" stroke="#5E94C1" stroke-width="4" />
                        <path d="M95 201.5L144 201.5" stroke="#FCFDFD" stroke-width="5" />
                        <path d="M171 201.5L209 201.5" stroke="#FCFDFD" stroke-width="5" />
                        <path d="M285 202L267 194L285 186" stroke="#FCFDFD" stroke-width="3" stroke-linejoin="bevel" />
                        <path d="M288.5 207.5L296.5 179.5" stroke="#FCFDFD" stroke-width="3" />
                        <path d="M300 202L318 194.5L300 186" stroke="#FCFDFD" stroke-width="3" stroke-linejoin="bevel" />
                        <path data-ignore="true" d="M337 233.7H20C9 233.7 0 224.7 0 213.7H357C357 224.8 348 233.7 337 233.7Z" fill="#00BBD3" />
                        <path data-ignore="true" d="M354.3 223.7C356 220.8 357 217.3 357 213.7H0C0 217.3 1 220.8 2.7 223.7H354.3Z" fill="#15D7E2" />
                    </g>
                    <defs>
                        <clipPath id="clip0">
                            <rect width="357" height="233.7" fill="white" />
                        </clipPath>
                    </defs>
                </svg>

            </div>
            <div class="first-screen__body">
                <h1 class="first-screen__title title title--large"><?php the_field('first-screen__title'); ?></h1>
                <p class="first-screen__text">
                    <?php the_field('first-screen__text'); ?>
                </p>
                <a href="#feedback-popup" class="first-screen__btn btn feedback-popup__btn">НАПИСАТЬ МНЕ</a>
            </div>
        </div>
    </div>
</section>

<?php if (get_field('about__show')) : ?>
    <section class="about">
        <div class="container">
            <h2 class="about__title title title--medium title--center"><?php the_field('about__title') ?></h2>
            <p class="about__text text text--center">
                <?php the_field('about__text') ?>
            </p>
        </div>
    </section>
<?php endif; ?>


<section class="stack">
    <div class="container">
        <div class="stack__inner">
            <ul class="stack__items">
                <?php
                // параметры по умолчанию
                $delay = 0.0;
                $posts = get_posts(array(
                    'numberposts' => 0,
                    'category_name'    => 'stack',
                    'orderby'     => 'date',
                    'order'       => 'ASC',
                    'post_type'   => 'post',
                    'suppress_filters' => true, // подавление работы фильтров изменения SQL запроса
                ));

                foreach ($posts as $post) {
                    setup_postdata($post);
                ?>
                    <li class="stack__item wow fadeInUp" data-wow-offset="50" data-wow-delay="<?php echo $delay ?>s"><img class="stack__item-img" src="<?php the_field('stack__image'); ?>" alt="<?php the_title(); ?>"></li>
                    <?php $delay = $delay + 0.2; ?>
                <?php
                }

                wp_reset_postdata(); // сброс
                ?>
            </ul>
        </div>
    </div>
</section>

<section class="projects decor--bg-part">
    <div class="container">
        <div class="projects__inner">
            <h2 class="projects__title title title--medium title--center"><?php echo get_the_title(162); ?></h2>
            <ol class="projects__items">


                <?php
                // параметры по умолчанию
                $posts = get_posts(array(
                    'numberposts' => 0,
                    'category_name'    => 'project',
                    'orderby'     => 'date',
                    'order'       => 'DESC',
                    'post_type'   => 'post',
                    'suppress_filters' => true, // подавление работы фильтров изменения SQL запроса
                ));

                foreach ($posts as $post) {
                    setup_postdata($post);
                    // формат вывода the_title() ...
                    $image = get_field('project_images');
                ?>
                    <li class="projects__item card">
                        <div class="card__image">
                            <a href="<?php echo get_permalink() ?>">
                                <img class="card__img" src="<?php the_field('project_images_project__image_1') ?>" alt="">
                            </a>
                        </div>
                        <div class="card__body">
                            <a href="<?php echo get_permalink() ?>" class="card__title"><?php the_title(); ?></a>
                            <div class="card__text">
                                <?php the_field('project__short_description'); ?>
                            </div>
                            <div class="card__links">
                                <a class="card__link" href="<?php echo get_permalink() ?>">Подробнее</a>
                                <a class="card__link" href="<?php the_field('project__link') ?>" target="_blank">Посмотреть</a>
                                <a class="card__link" href="<?php the_field('project__link_source_code') ?>" target="_blank">GitHab</a>
                            </div>
                        </div>
                    </li>
                <?php

                }

                wp_reset_postdata(); // сброс
                ?>
            </ol>
        </div>
    </div>
</section>

<section class="numbers">
    <div class="container">
        <ul class="numbers__items decor--line-top">
            <li class="numbers__item">
                <div class="numbers__number">
                    <div class="odometer" data-odometer="<?php the_field('numbers__end_1') ?>">
                        <?php the_field('numbers__start_1') ?>
                    </div>
                </div>
                <div class="numbers__text">
                    <?php the_field('numbers__text_1') ?>
                </div>
            </li>
            <li class="numbers__item">
                <div class="numbers__number">
                    <div class="odometer" data-odometer="<?php the_field('numbers__end_2') ?>">
                        <?php the_field('numbers__start_2') ?>
                    </div>
                </div>
                <div class="numbers__text">
                    <?php the_field('numbers__text_2') ?>
                </div>
            </li>
            <li class="numbers__item">
                <div class="numbers__number">
                    <div class="odometer" data-odometer="<?php the_field('numbers__end_3') ?>">
                        <?php the_field('numbers__start_3') ?>
                    </div>
                </div>
                <div class="numbers__text">
                    <?php the_field('numbers__text_3') ?>
                </div>
            </li>
            <li class="numbers__item">
                <div class="numbers__number">
                    <div class="odometer" data-odometer="<?php the_field('numbers__end_4') ?>">
                        <?php the_field('numbers__start_4') ?>
                    </div>
                </div>
                <div class="numbers__text">
                    <?php the_field('numbers__text_4') ?>
                </div>
            </li>
            <li class="numbers__item">
                <div class="numbers__number">
                    <div class="odometer" data-odometer="<?php the_field('numbers__end_5') ?>">
                        <?php the_field('numbers__start_5') ?>
                    </div>
                </div>
                <div class="numbers__text">
                    <?php the_field('numbers__text_5') ?>
                </div>
            </li>
        </ul>
    </div>
</section>

<section class="contacts">
    <div class="container">
        <h2 class="contacts__title title title--medium title--center"><?php the_field('contacts__form-title', 167) ?></h2>
        <p class="contacts__text text text--center">
            <?php the_field('contacts__form-text', 167) ?>
        </p>
        <div class="contacts__form form">
            <?php echo do_shortcode('[contact-form-7 id="202" title="Форма обратной связи"]') ?>
        </div>
    </div>
</section>

<?php
get_footer(null, array('feedback-popup'));
?>